<!-- Header -->
<header class="header">
    <div class="header-left">
        <button class="btn btn-link sidebar-toggle d-md-none">
            <i class="fas fa-bars"></i>
        </button>
        <nav aria-label="breadcrumb" class="d-none d-md-block">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="dashboard.html">Home</a></li>
                <li class="breadcrumb-item active" id="current-page">Dashboard</li>
            </ol>
        </nav>
    </div>

    <div class="header-search">
        <div class="input-group">
            <span class="input-group-text border-0 bg-light">
                <i class="fas fa-search"></i>
            </span>
            <input type="text" class="form-control border-0 bg-light" placeholder="Search...">
            <button class="btn btn-light" type="button" data-bs-toggle="tooltip" title="Voice Search">
                <i class="fas fa-microphone"></i>
            </button>
        </div>
    </div>

    <div class="header-right">
        <!-- Deposit Button -->
        <button class="btn btn-primary me-2" type="button" data-bs-toggle="modal" data-bs-target="#depositModal">
            <i class="fas fa-plus-circle me-2"></i>Deposit
        </button>

        <!-- Quick Actions -->
        <div class="dropdown me-2">
            <button class="btn btn-light" type="button" data-bs-toggle="dropdown">
                <i class="fas fa-plus"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-end">
                <h6 class="dropdown-header">Quick Actions</h6>
                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#depositModal">
                    <i class="fas fa-plus-circle text-success me-2"></i>Deposit Money
                </a>
                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#transferModal">
                    <i class="fas fa-exchange-alt text-primary me-2"></i>Transfer Money
                </a>
                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#createTeamModal">
                    <i class="fas fa-users text-info me-2"></i>Create Team
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="statements.html">
                    <i class="fas fa-file-invoice text-warning me-2"></i>Generate Statement
                </a>
            </div>
        </div>

        <!-- Notifications -->
        <div class="dropdown me-2">
            <button class="btn btn-light position-relative" type="button" data-bs-toggle="dropdown">
                <i class="fas fa-bell"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    3
                    <span class="visually-hidden">unread notifications</span>
                </span>
            </button>
            <div class="dropdown-menu dropdown-menu-end notification-dropdown">
                <div class="dropdown-header d-flex justify-content-between align-items-center">
                    <h6 class="mb-0">Notifications</h6>
                    <a href="#" class="text-muted text-decoration-none small">Mark all as read</a>
                </div>
                <div class="notification-list">
                    <a href="#" class="dropdown-item d-flex align-items-center py-2">
                        <div class="flex-shrink-0">
                            <div class="avatar-sm bg-primary bg-opacity-10 text-primary rounded">
                                <i class="fas fa-user-plus"></i>
                            </div>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <p class="mb-0">New team member added</p>
                            <small class="text-muted">2 hours ago</small>
                        </div>
                    </a>
                    <a href="#" class="dropdown-item d-flex align-items-center py-2">
                        <div class="flex-shrink-0">
                            <div class="avatar-sm bg-success bg-opacity-10 text-success rounded">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <p class="mb-0">Loan payment received</p>
                            <small class="text-muted">5 hours ago</small>
                        </div>
                    </a>
                    <a href="#" class="dropdown-item d-flex align-items-center py-2">
                        <div class="flex-shrink-0">
                            <div class="avatar-sm bg-warning bg-opacity-10 text-warning rounded">
                                <i class="fas fa-file-alt"></i>
                            </div>
                        </div>
                        <div class="flex-grow-1 ms-3">
                            <p class="mb-0">Monthly statement ready</p>
                            <small class="text-muted">1 day ago</small>
                        </div>
                    </a>
                </div>
                <a href="#" class="dropdown-item text-center text-primary small py-2">
                    View All Notifications
                </a>
            </div>
        </div>

        <!-- User Menu -->
        <div class="dropdown">
            <button class="btn btn-light d-flex align-items-center" type="button" data-bs-toggle="dropdown">
                <img src="https://ui-avatars.com/api/?name=John+Doe&background=2563eb&color=fff" 
                     class="rounded-circle me-2" 
                     alt="User" 
                     width="32" 
                     height="32">
                <div class="d-none d-md-block text-start me-2">
                    <div class="fw-medium">John Doe</div>
                    <div class="small text-muted">Academic Staff</div>
                </div>
                <i class="fas fa-chevron-down small ms-2"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-end">
                <div class="dropdown-header">
                    <div class="d-flex align-items-center">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=2563eb&color=fff&size=64" 
                             class="rounded-circle me-3" 
                             alt="User" 
                             width="64" 
                             height="64">
                        <div>
                            <h6 class="mb-1">John Doe</h6>
                            <div class="small text-muted">john.doe@dilla.edu.et</div>
                            <span class="badge bg-success">Active Member</span>
                        </div>
                    </div>
                </div>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="profile.html">
                    <i class="fas fa-user me-2 text-primary"></i>My Profile
                </a>
                <a class="dropdown-item" href="teams.html">
                    <i class="fas fa-users me-2 text-info"></i>My Teams
                    <span class="badge bg-info rounded-pill ms-2">8</span>
                </a>
                <a class="dropdown-item" href="tasks.html">
                    <i class="fas fa-tasks me-2 text-warning"></i>My Tasks
                    <span class="badge bg-warning rounded-pill ms-2">5</span>
                </a>
                <a class="dropdown-item" href="settings.html">
                    <i class="fas fa-cog me-2 text-secondary"></i>Settings
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="support.html">
                    <i class="fas fa-question-circle me-2 text-primary"></i>Help Center
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item text-danger" href="logout.html">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                </a>
            </div>
        </div>
    </div>
</header>

<style>
/* Header Styles */
.header {
    background: #fff;
    border-bottom: 1px solid #e5e7eb;
    padding: 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.header-search {
    flex: 1;
    max-width: 400px;
    margin: 0 2rem;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Notification Styles */
.notification-dropdown {
    width: 320px;
    padding: 0;
}

.notification-list {
    max-height: 360px;
    overflow-y: auto;
}

.avatar-sm {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
}

/* Dropdown Animations */
.dropdown-menu {
    animation: dropdownFade 0.2s ease-out;
}

@keyframes dropdownFade {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .header-search {
        display: none;
    }
}

/* Deposit Button Style */
.btn-primary {
    background-color: #2563eb;
    border-color: #2563eb;
    transition: all 0.2s;
}

.btn-primary:hover {
    background-color: #1d4ed8;
    border-color: #1d4ed8;
    transform: translateY(-1px);
}

/* Hide deposit button on mobile */
@media (max-width: 768px) {
    .header-right .btn-primary {
        display: none;
    }
}
</style>

<script>
// Update current page in breadcrumb
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = document.getElementById('current-page');
    const pageTitle = document.title.split(' - ')[0];
    if (currentPage && pageTitle) {
        currentPage.textContent = pageTitle;
    }
});

// Initialize deposit form handler
document.addEventListener('DOMContentLoaded', function() {
    const depositForm = document.getElementById('depositForm');
    if (depositForm) {
        depositForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const amount = document.getElementById('depositAmount').value;
            try {
                const userData = await window.PaymentUI.getUserData();
                await window.PaymentUI.initializePayment(amount, userData);
            } catch (error) {
                console.error('Deposit error:', error);
                alert('Failed to process deposit. Please try again.');
            }
        });
    }
});
</script>

<!-- Deposit Modal -->
<div class="modal fade" id="depositModal" tabindex="-1" aria-labelledby="depositModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="depositModalLabel">Deposit Money</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="depositForm">
                    <div class="mb-3">
                        <label for="depositAmount" class="form-label">Amount (ETB)</label>
                        <div class="input-group">
                            <span class="input-group-text">ETB</span>
                            <input type="number" class="form-control" id="depositAmount" required min="1" step="0.01" placeholder="Enter amount">
                        </div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-lock me-2"></i>Proceed to Secure Payment
                        </button>
                    </div>
                </form>
            </div>
            <div class="modal-footer justify-content-center">
                <div class="text-center w-100">
                    <div class="d-flex align-items-center justify-content-center">
                        <img src="/images/chapa-badge.png" 
                             onerror="this.onerror=null; this.src='https://chapa.co/assets/images/chapa-badge.png'" 
                             alt="Secured by Chapa" 
                             height="40" 
                             class="me-2">
                    </div>
                    <small class="text-muted d-block mt-2">Your payment is secured by Chapa</small>
                </div>
            </div>
        </div>
    </div>
</div> 